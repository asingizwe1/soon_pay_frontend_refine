curl -X POST \
    https://api.sandbox.africastalking.com/version1/messaging \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/x-www-form-urlencoded' \
    -H 'apiKey: MyAppApiKey' \
    -d 'username=MyAppUsername&to=%2B254711XXXYYY,%2B254733YYYZZZ&message=Hello%20World!&from=myShortCode'
    
    example response
    
    {
    "SMSMessageData": {
        "Message": "Sent to 1/1 Total Cost: KES 0.8000",
        "Recipients": [{
            "statusCode": 101,
            "number": "+254711XXXYYY",
            "status": "Success",
            "cost": "KES 0.8000",
            "messageId": "ATPid_SampleTxnId123"
        }]
    }
}

App Name: bitnob_sms
Username: asingizwe1


Request Headers
These are the standard request headers that are needed when authenticating with the API.

When using username and API Key
Field
apiKey String
Africa’s Talking application apiKey.
Content-Type String
The requests content type, application/x-www-form-urlencoded
Accept String Optional
The requests response type. Can be application/json or application/xml

Request payload
In addition to the standard request headers, the body of the request should contain the following fields:

Field
username String Required
Your Africa’s Talking application username.
to String Required
A comma separated string of recipients’ phone numbers.
message String Required
The message to be sent.
from String Optional
Your registered short code or alphanumeric, defaults to AFRICASTKNG.
bulkSMSMode Integer Optional
This is used by the Mobile Service Provider to determine who gets billed for a message sent using a Mobile-Terminated ShortCode. The default value is 1(which means that the sender - Africa’s Talking account being used - gets charged). This field will be ignored for messages sent using alphanumerics or Mobile-Originated shortcodes. The value must be set to 1 for bulk messages.
enqueue Integer Optional
This is used for Bulk SMS clients that would like to deliver as many messages to the API before waiting for an acknowledgement from the Telcos. Possible values are 1 to enable and 0 to disable. If enabled, the API will store the messages in a queue and send them out asynchronously after responding to the request. The default value is 1
keyword String Optional
The keyword to be used for a premium service.
linkId String Optional
This is used for premium services to send OnDemand messages. We forward the linkId to your application when the user sends a message to your service.
retryDurationInHours Integer Optional
This specifies the number of hours your subscription message should be retried in case it’s not delivered to the subscriber.
API response
The body of the response will be a JSON object containing the following fields:

Field
SMSMessageData Map
A Map detailing the eventual result of the sms request. It contains the following fields:
Message String: A summary of the total number of recipients the sms was sent to and the total cost incurred.
Recipients List: A list of recipients included in the original request. Each recipient is a Map with the following fields:
statusCode Integer: This corresponds to the status of the request. Possible values are:
100: Processed
101: Sent
102: Queued
401: RiskHold
402: InvalidSenderId
403: InvalidPhoneNumber
404: UnsupportedNumberType
405: InsufficientBalance
406: UserInBlacklist
407: CouldNotRoute
409: DoNotDisturbRejection
500: InternalServerError
501: GatewayError
502: RejectedByGateway
number String: The recipient’s phone number
cost String: Amount incurred to send this sms. The format of this string is: (3-digit Currency Code)(space)(Decimal Value) e.g KES 1.00
status String: A string indicating whether the sms was sent to this recipient or not. This does not indicate the delivery status of the sms to this recipient.
messageId String: The messageId received when the sms was sent.
For Safaricom in Kenya, you can send SMSs using hashed phone numbers to the same API endpoint.

Request payload
In addition to the standard request headers, the body of the request should contain the following fields:

Field
username String Required
Your Africa’s Talking application username.
message String Required
The message to be sent.
maskedNumber String Required
The string of the hashed number to be sent to.
telco String Required
The service provider.
senderId String Optional
Your registered short code or alphanumeric
phoneNumbers String Optional
This value must be a blank list, i.e, []
